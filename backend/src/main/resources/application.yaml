# Base Application Configuration
# This file contains common settings shared across all profiles
# Profile-specific settings are in application-{profile}.yaml

spring:
  application:
    name: luqma-backend
  
  # Default profile if none specified
  profiles:
    default: dev
  
  # Cache Configuration
  cache:
    cache-names: recipes
    caffeine:
      spec: maximumSize=500,expireAfterWrite=3600s

# Server Configuration
server:
  port: 8080
  shutdown: graceful  # Enable graceful shutdown
  max-http-request-header-size: 10KB
  tomcat:
    max-swallow-size: 10MB
  error:
    include-message: never
    include-binding-errors: never
    include-stacktrace: never

# Actuator Configuration
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
      base-path: /actuator
  endpoint:
    health:
      show-details: never  # Default: don't show details (overridden per profile)
      probes:
        enabled: true  # Enable liveness and readiness probes for k8s
  health:
    livenessState:
      enabled: true
    readinessState:
      enabled: true

# Spoonacular API Configuration (common defaults)
spoonacular:
  api-url: ${SPOONACULAR_API_URL:https://api.spoonacular.com}
  api-key: ${SPOONACULAR_API_KEY:}
  connection-timeout: ${SPOONACULAR_CONNECTION_TIMEOUT:10000}
  read-timeout: ${SPOONACULAR_READ_TIMEOUT:30000}

# Recipe Search Configuration
recipe-search:
  default-page-size: 9
  max-page-size: 100
  max-page-number: 1000

# Rate Limiting Configuration
rate-limit:
  max-requests-per-minute: 100
  window-size-millis: 60000
  max-entries: 10000
  cleanup-interval-millis: 300000

# CORS Configuration
cors:
  allowed-origins:
    - http://localhost:3000
  allowed-methods:
    - GET
    - POST
    - PUT
    - DELETE
    - OPTIONS
  allowed-headers:
    - Content-Type
    - Accept
    - Authorization
  allow-credentials: false
  max-age: 3600

# Logging Configuration (base level)
logging:
  level:
    root: INFO
    app.luqma: INFO
