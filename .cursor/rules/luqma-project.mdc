---
description: "Essential Luqma project context for AI assistance: tech stack, architecture patterns, file locations, and quick references"
alwaysApply: true
---
# Luqma Project Context

Essential project context for AI assistance.

## Overview

Luqma: Recipe search application with nutritional information and dynamic ingredient exclusion.

**Tech Stack:**
- Backend: Spring Boot 3.5.7, Java 25, Gradle
- Frontend: React 19.2.0, Vite 7.2.2, TailwindCSS 4.1.17
- External API: Spoonacular (cached with Spring Cache/Caffeine)

---

## Security (Critical)

You must NEVER:
- Expose API keys in frontend code
- Commit API keys to version control
- Log API keys
- Include API keys in HTTP responses/errors

**Architecture:**
- Backend proxies all Spoonacular API calls
- Frontend calls backend only, never external APIs directly
- API keys stored in `backend/.env` only (${SPOONACULAR_API_KEY})
- CORS configured per environment (never `*` in production)

**Detailed:** [Security Standards](security-standards.mdc)

---

## Quick Patterns

### Backend (Layered Architecture)

**Layer flow:** Controller → Service → Repository → Client

- **Controller:** HTTP concerns only (thin layer)
- **Service:** Business logic (core functionality)
- **Repository:** Data access with `@Cacheable`
- **Client:** External API integration (SpoonacularClient)

**Location:** `backend/src/main/java/app/luqma/backend/`

**Detailed:** [Backend Architecture](../../docs/architecture/backend-architecture.md)

### Frontend (Feature-Based)

**Organization:**
- Page-specific components: `pages/{page}/`
- Shared components (2+ pages): `components/`
- Custom hooks: `hooks/`
- State: Context API (`RecipeExclusionContext`)
- URL state: Search query/page (shareable links)

**Location:** `frontend/src/`

**Detailed:** [Frontend Architecture](../../docs/architecture/frontend-architecture.md)

---

## Essential File Locations

**Configuration:**
- Backend env: `backend/.env`
- Backend config: `backend/src/main/resources/application*.yaml`
- Frontend env: `frontend/.env`

**API Client:**
- Backend: `backend/src/main/java/app/luqma/backend/client/SpoonacularClient.java`
- Frontend: `frontend/src/services/apiClient.js`

**Domain Models:**
- DTOs: `backend/src/main/java/app/luqma/backend/model/dto/`
- Domain: `backend/src/main/java/app/luqma/backend/model/domain/`

---

## Key Features

**Recipe Search:**
- Live search with 300ms debounce
- Pagination (default: 9 per page)
- URL state synchronization

**Recipe Details:**
- Full nutrition breakdown
- Cached for 1 hour (Caffeine)
- Ingredient list with measurements

**Ingredient Exclusion:**
- Dynamic nutrition recalculation
- Hybrid calculation (ingredient-level or proportional)
- No caching (computed in-memory)

---

## Development Commands

```bash
# Root
npm run dev          # Start both services
npm run stop         # Stop both services

# Backend only
cd backend
./gradlew bootRun
./gradlew test

# Frontend only
cd frontend
npm run dev
npm test
```

---

## Coverage Requirements

**Backend:**
- Services: 80%+ (enforced by JaCoCo)
- Controllers: 70%+ (recommended)

**Frontend:**
- Custom hooks: 80%+ (recommended)
- Components: 70%+ (recommended)

---

## Documentation (When You Need Details)

**For AI:** Read these when working on specific areas:

**Getting Started:**
- [Getting Started Guide](../../docs/guides/getting-started.md) - Setup walkthrough
- [Configuration Guide](../../docs/guides/configuration.md) - All config options

**Architecture:**
- [System Overview](../../docs/architecture/system-overview.md) - High-level design
- [Backend Architecture](../../docs/architecture/backend-architecture.md) - Layer details
- [Frontend Architecture](../../docs/architecture/frontend-architecture.md) - Component organization
- [Data Flows](../../docs/architecture/data-flows.md) - Request flow diagrams
- [Caching Strategy](../../docs/architecture/caching-strategy.md) - Cache implementation

**API:**
- [API Documentation](../../docs/api/README.md) - Endpoint reference
- [Error Handling](../../docs/api/error-handling.md) - Error codes

**Testing:**
- [Backend Testing](../../docs/testing/backend-testing.md) - JUnit conventions
- [Frontend Testing](../../docs/testing/frontend-testing.md) - Vitest conventions

**Decisions:**
- [Architecture Decision Records](../../docs/decisions/README.md) - All ADRs

---

## Standards (Always Follow)

**Project-wide:**
- [Git Standards](git-standards.mdc) - Commit, branch, PR conventions
- [Security Standards](security-standards.mdc) - API key protection, validation
- [Accessibility Standards](accessibility-standards.mdc) - WCAG 2.1 AA compliance

**Backend:**
- [Backend Standards](../../backend/.cursor/rules/backend-standards.mdc)
- [API Design Standards](../../backend/.cursor/rules/api-design-standards.mdc)

**Frontend:**
- [Frontend Standards](../../frontend/.cursor/rules/frontend-standards.mdc)
- [JavaScript/React Style Guide](../../frontend/.cursor/rules/javascript-react-style-guide.mdc)

---

## Quick Decision Tree

**Adding a new API endpoint?**
1. Create DTO in `model/dto/`
2. Add service method
3. Add controller endpoint
4. Write tests (80%+ coverage)
5. Update Swagger docs (auto-generated)
6. Update [API Documentation](../../docs/api/)

**Adding a new React component?**
1. Page-specific? → Put in `pages/{page}/`
2. Shared (2+ pages)? → Put in `components/`
3. Reusable logic? → Extract to custom hook
4. Cross-component state? → Use Context or URL state
5. Write tests (70%+ coverage)

**Need to change configuration?**
→ See [Configuration Guide](../../docs/guides/configuration.md)

**Encountering an error?**
→ See [Troubleshooting](../../docs/TROUBLESHOOTING.md)

---

**For comprehensive documentation:** [Documentation Index](../../docs/README.md)
