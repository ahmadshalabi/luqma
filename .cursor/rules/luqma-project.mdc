---
description: "Luqma project context: Recipe search application with Spring Boot backend and React frontend"
alwaysApply: true
---
# Luqma Project Context

## Overview

Recipe search application with nutritional information and dynamic ingredient exclusion.

## Tech Stack

**Backend:** Spring Boot 3.5.7, Java 25, Gradle, Spoonacular API, JaCoCo

**Frontend:** React 19.2.0, Vite 7.2.2, TailwindCSS 4.1.17, React Router 7.9.5, Context API, Vitest

## Architecture

**Security (Critical):**
- Backend proxies all Spoonacular API calls
- Frontend calls backend only, never external APIs
- API keys never in frontend or version control

**Data Flow:** User â†’ React UI â†’ Backend API â†’ Spoonacular

**Backend Structure** (`backend/src/main/java/app/luqma/backend/`):
- controller/: âœ… REST endpoints (RecipeController with /search and /{id} endpoints)
- service/: âœ… Business logic (RecipeSearchService, RecipeDetailService with mock data integration)
- filter/: âœ… Servlet filters (RateLimitFilter)
- client/: ðŸš§ Spoonacular API client - PENDING (currently using mock data)
- model/dto/: âœ… API request/response (RecipeSearchResponse, RecipeSummary, RecipeDetailResponse, IngredientDTO, NutritionDTO)
- model/domain/: âœ… Internal models (RecipeDetail, ExtendedIngredient, NutritionInfo, Nutrient)
- config/: âœ… Spring configuration (CORS, Security, Rate Limiting, RecipeSearch properties)
- exception/: âœ… Custom exceptions + GlobalExceptionHandler with comprehensive error handling
- util/: âœ… Utility classes (StringSanitizer for input validation, MockDataLoader)

**Frontend Structure** (`frontend/src/`):
- features/: Feature-based components organized by domain
  - layout/: Header, Footer, HeroSection, PageSection, MainLayout
  - recipe/: RecipeCard, RecipeGrid, RecipeDetail
  - search/: SearchBar, SearchResults, ResultsHeader
  - about/: FeatureCard
- pages/: Route pages (HomePage, AboutPage, RecipePage)
- primitives/: UI primitives (Button, Card, MessageState, LoadingState, BackLink, Icon, Pagination)
- hooks/: Custom hooks (useMobileMenu, usePagination, useSearch, useSearchState, useRecipeDetail)
- services/: âœ… API client (apiClient.js with searchRecipes and getRecipeById)
- utils/: Helper functions (searchUtils.js, colorUtils.js)
- mocks/: Mock Spoonacular API data for development and testing

**Development Approach:**
- Backend uses mock data from `backend/src/main/resources/mocks/` for both search and recipe details
- Mock data replicates Spoonacular API responses for offline development
- Backend endpoints (/api/v1/recipes/search and /api/v1/recipes/{id}) are functional with mock data
- Frontend connects to backend API for all data
- Spoonacular API integration will replace mock data when implemented

## API Endpoints

**Backend REST API:**
- âœ… GET /api/v1/recipes/search - Search recipes with pagination (query, page, pageSize params)
- âœ… GET /api/v1/recipes/{id} - Get recipe details with ingredients, nutrition, and instructions
- ðŸš§ POST /api/v1/recipes/{id}/exclude-ingredients - Exclude ingredients and recalculate - PLANNED

**Health & Monitoring:**
- GET /actuator/health - Health check
- GET /actuator/health/liveness - Liveness probe
- GET /actuator/health/readiness - Readiness probe
- GET /actuator/info - Application info

**API Documentation:**
- Swagger UI: ${BACKEND_URL}/swagger-ui.html (when running)

**Spoonacular API (external API used in backend only):**
- GET /recipes/complexSearch
- GET /recipes/{id}/information
- GET /food/ingredients/{id}/information

## Environment Variables

**Backend (`backend/.env`):**
- SPOONACULAR_API_KEY (required)
- SPRING_PROFILES_ACTIVE (optional, defaults to `dev`)

**Frontend (`frontend/.env`):**
- LUQMA_API_URL (Backend API endpoint, default: `http://localhost:8080/api/v1`)

## Commands

**Backend:**
- ./gradlew bootRun (run with dev profile)
- npm run dev:backend (from root)
- ./gradlew test

**Frontend:**
- npm run dev (from root, starts at http://localhost:3000)
- npm run dev:frontend (from root)
- cd frontend && npm run dev
- npm run build
- npm test
- npm run lint:fix

## Documentation

**ADRs:** docs/decisions/ (MADR format)

**Standards:** .cursor/rules/ (root), backend/.cursor/rules/, frontend/.cursor/rules/

**Key Principle:** Backend protects secrets and handles business logic. Frontend focuses on user experience. Both prioritize accessibility and security.
